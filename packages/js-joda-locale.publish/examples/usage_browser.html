<!DOCTYPE html>
<!--
  ~ @copyright (c) 2017, Philipp Thuerwaechter & Pattrick Hueper
  ~ @license BSD-3-Clause (see LICENSE.md in the root directory of this source tree)
  -->

<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>js-joda-extra Usage Example</title>
    <!--<script type="text/javascript" src="../node_modules/cldrjs/dist/cldr.js"></script>-->
    <!--<script type="text/javascript" src="../node_modules/js-joda/dist/js-joda.js"></script>-->
    <!--<script type="text/javascript" src="../node_modules/js-joda-timezone/dist/js-joda-timezone.js"></script>-->
    <!--<script type="text/javascript" src="../dist/js-joda-locale.js"></script>-->
    <script type="text/javascript" src="../node_modules/requirejs/require.js"></script>
</head>
<body>
<div class="out"/>
<script type="text/javascript">
    require.config({
        paths: {

            // Unicode CLDR JSON data.
            cldrData: "../node_modules/cldr-data",

            // require.js plugin we'll use to fetch CLDR JSON content.
            json: "../node_modules/requirejs-json/json",

            // text is json's dependency.
            text: "../node_modules/requirejs-text/text",

            'js-joda': '../node_modules/js-joda/dist/js-joda',

            'js-joda-timezone': '../node_modules/js-joda-timezone/dist/js-joda-timezone',

            'js-joda-locale': '../dist/js-joda-locale',

            cldrjs: '../node_modules/cldrjs/dist/cldr',

        }
    });
    define('cldr-data', [
        // CLDR content.
        "json!cldrData/supplemental/likelySubtags.json",
        "json!cldrData/supplemental/metaZones.json",
        "json!cldrData/main/en/ca-gregorian.json",
        "json!cldrData/main/en/timeZoneNames.json",
        "json!cldrData/main/de/ca-gregorian.json",
        "json!cldrData/main/de/timeZoneNames.json",
        "json!cldrData/main/fr/ca-gregorian.json",
        "json!cldrData/main/fr/timeZoneNames.json",
    ], function (
        likelySubtags,
        metaZones,
        enCaGregorian,
        enTimeZoneNames,
        deCaGregorian,
        deTimeZoneNames,
        frCaGregorian,
        frTimeZoneNames,
    ){
        return function(path) {
            switch (path) {
                case 'supplemental/likelySubtags':
                    return likelySubtags;
                case 'supplemental/metaZones':
                    return metaZones;
                case 'main/en/ca-gregorian':
                    return enCaGregorian;
                case 'main/en/timeZoneNames':
                    return enTimeZoneNames;
                case 'main/de/ca-gregorian':
                    return deCaGregorian;
                case 'main/de/timeZoneNames':
                    return deTimeZoneNames;
                case 'main/fr/ca-gregorian':
                    return frCaGregorian;
                case 'main/fr/timeZoneNames':
                    return frTimeZoneNames;
                default:
                    throw Error ('Undefined cldr-data path: ' + path);
            }
        }
    });
    require([
        'js-joda',
        'js-joda-timezone',
        'js-joda-locale',
    ], function (JSJoda, JSJodaTimezone, JSJodaLocale) {
        function output(s) {
            console.log(s);
            var outDiv = document.getElementsByClassName('out')[0];
            var p = document.createElement('p');
            p.innerHTML = s;
            outDiv.appendChild(p);
        }

        JSJoda.use(JSJodaTimezone);
        JSJoda.use(JSJodaLocale);
        var zdt = JSJoda.ZonedDateTime.of(2016, 1, 1, 0, 0, 0, 0, JSJoda.ZoneId.of('Europe/Berlin'));
        output('formatted string: ' + zdt.format(JSJoda.DateTimeFormatter.ofPattern('eeee yyyy MMMM dd, hh:mm:ss zzzz').withLocale(JSJoda.Locale.ENGLISH)));
        output('formatted string: ' + zdt.format(JSJoda.DateTimeFormatter.ofPattern('eeee yyyy MMMM dd, hh:mm:ss zzzz').withLocale(JSJoda.Locale.GERMAN)));
        output('formatted string: ' + zdt.format(JSJoda.DateTimeFormatter.ofPattern('eeee yyyy MMMM dd, hh:mm:ss zzzz').withLocale(JSJoda.Locale.FRENCH)));
    });
</script>
</body>
</html>
