<!DOCTYPE html>
<!--
  ~ @copyright (c) 2017, Philipp Thuerwaechter & Pattrick Hueper
  ~ @license BSD-3-Clause (see LICENSE.md in the root directory of this source tree)
  -->

<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>js-joda-locale Usage Example</title>
    <script type="text/javascript" src="../node_modules/requirejs/require.js"></script>
</head>
<body>
<div class="out"/>
<script type="text/javascript">
    require.config({
        paths: {

            // Unicode CLDR JSON data.
            'cldr-data': "../node_modules/cldr-data",

            // require.js plugin we'll use to fetch CLDR JSON content.
            json: "../node_modules/requirejs-json/json",

            // text is json's dependency.
            text: "../node_modules/requirejs-text/text",

            'js-joda': '../node_modules/js-joda/dist/js-joda',

            'js-joda-timezone': '../node_modules/js-joda-timezone/dist/js-joda-timezone',

            'js-joda-locale': '../dist/js-joda-locale',

            cldrjs: '../node_modules/cldrjs/dist/cldr',

        }
    });
    /* define cldr-data module that preloads and returns the necessary data when used
    from within js-joda-locale implementation
     */
    define('cldr-data', [
        // CLDR content, all files that are needed must be required here and can then be dynamically required below
        "json!cldr-data/supplemental/likelySubtags.json",
        "json!cldr-data/supplemental/metaZones.json",
        "json!cldr-data/supplemental/weekData.json",
        "json!cldr-data/main/en/ca-gregorian.json",
        "json!cldr-data/main/en/timeZoneNames.json",
        "json!cldr-data/main/en-CA/ca-gregorian.json",
        "json!cldr-data/main/en-CA/timeZoneNames.json",
        "json!cldr-data/main/en-GB/ca-gregorian.json",
        "json!cldr-data/main/en-GB/timeZoneNames.json",
        "json!cldr-data/main/de/ca-gregorian.json",
        "json!cldr-data/main/de/timeZoneNames.json",
        "json!cldr-data/main/fr/ca-gregorian.json",
        "json!cldr-data/main/fr/timeZoneNames.json",
    ], function (
    ){
        return function(path) {
            return (require('json!cldr-data/' + path));
        }
    });
    require([
        'js-joda',
        'js-joda-timezone',
        'js-joda-locale',
    ], function (JSJoda, JSJodaTimezone, JSJodaLocale) {
        function output(s) {
            console.log(s);
            var outDiv = document.getElementsByClassName('out')[0];
            var p = document.createElement('p');
            p.innerHTML = s;
            outDiv.appendChild(p);
        }

        let outputDateInDifferentLocales = function (zdt) {
            output('Times in ' + zdt.zone());
            output('&nbsp;');
            output('en_US formatted string: ' + zdt.format(JSJoda.DateTimeFormatter.ofPattern('eeee MMMM dd yyyy GGGG, hh:mm:ss a zzzz, \'Week \' ww, \'Quarter \' QQQ').withLocale(JSJoda.Locale.US)));
            output('en_CA formatted string: ' + zdt.format(JSJoda.DateTimeFormatter.ofPattern('eeee MMMM dd yyyy GGGG, hh:mm:ss a zzzz, \'Week \' ww, \'Quarter \' QQQ').withLocale(JSJoda.Locale.CANADA)));
            output('en_GB formatted string: ' + zdt.format(JSJoda.DateTimeFormatter.ofPattern('eeee MMMM dd yyyy GGGG, hh:mm:ss a zzzz, \'Week \' ww, \'Quarter \' QQQ').withLocale(JSJoda.Locale.UK)));
            output('de_DE formatted string: ' + zdt.format(JSJoda.DateTimeFormatter.ofPattern('eeee MMMM dd yyyy GGGG, hh:mm:ss a zzzz, \'Week \' ww, \'Quarter \' QQQ').withLocale(JSJoda.Locale.GERMANY)));
            output('fr_FR formatted string: ' + zdt.format(JSJoda.DateTimeFormatter.ofPattern('eeee MMMM dd yyyy GGGG, hh:mm:ss a zzzz, \'Week \' ww, \'Quarter \' QQQ').withLocale(JSJoda.Locale.FRANCE)));
            output('&nbsp;');
            output('<hr />');
        }

        JSJoda.use(JSJodaTimezone);
        JSJoda.use(JSJodaLocale);
        var zdt = JSJoda.ZonedDateTime.of(2017, 1, 1, 0, 0, 0, 0, JSJoda.ZoneId.of('Europe/Berlin'));
        outputDateInDifferentLocales(zdt)
        zdt = JSJoda.ZonedDateTime.of(2017, 1, 1, 0, 0, 0, 0, JSJoda.ZoneId.of('America/New_York'));
        outputDateInDifferentLocales(zdt)
    });
</script>
</body>
</html>
